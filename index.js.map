{"version":3,"file":"index.js","sources":["../src/components/artists/artists.js","../src/components/feedback/feedback.js"],"sourcesContent":["import './artists.css';\n\nconst artistsList = document.getElementById('artists-list');\n\nexport function createArtistCard(artist) {\n  const card = document.createElement('div');\n  card.className = 'artist-card';\n\n  card.innerHTML = `\n    <div class=\"artist-card__image\">\n      <img \n        src=\"${artist.strArtistThumb || ''}\" \n        alt=\"${artist.strArtist || ''}\" \n      />\n    </div>\n\n    <div class=\"artist-card__content\">\n      <div class=\"artist-card__genres\">\n        ${(artist.genres || [])\n          .map(\n            (genre) =>\n              `<span class=\"artist-card__genre\">${genre}</span>`\n          )\n          .join('')}\n      </div>\n\n      <h3 class=\"artist-card__name\">\n        ${artist.strArtist || ''}\n      </h3>\n\n      <p class=\"artist-card__description\">\n        ${artist.strBiographyEN || ''}\n      </p>\n\n      <button class=\"artist-card__link\" type=\"button\">\n        Learn More\n        <svg class=\"artist-card__icon\" width=\"8\" height=\"14\" viewBox=\"0 0 8 14\" aria-hidden=\"true\">\n          <path d=\"M0 14L8 7L0 0V14Z\" fill=\"currentColor\"/>\n        </svg>\n      </button>\n    </div>\n  `;\n\n  return card;\n}\n","import Swiper from 'swiper';\nimport { Navigation } from 'swiper/modules';\nimport 'swiper/css';\nimport 'css-star-rating/css/star-rating.css';\n\nconst API_URL = 'https://sound-wave.b.goit.study/api/feedbacks';\nconst FEEDBACK_LIMIT = 10;\n\nconst refs = {\n  wrapper: document.querySelector('.feedback'),\n  swiperEl: document.querySelector('.feedback-swiper'),\n  slidesEl: document.querySelector('.feedback-swiper .swiper-wrapper'),\n  prevBtn: document.querySelector('.feedback-arrow--prev'),\n  nextBtn: document.querySelector('.feedback-arrow--next'),\n  dots: Array.from(document.querySelectorAll('.feedback-pagination .dot')),\n};\n\ninitFeedback();\n\nasync function initFeedback() {\n  if (!refs.wrapper || !refs.slidesEl) return;\n\n  try {\n    const feedbacks = await fetchFeedbacks(FEEDBACK_LIMIT);\n    renderSlides(feedbacks);\n    initSwiper();\n  } catch (error) {\n    renderError('Failed to load feedbacks.');\n    // eslint-disable-next-line no-console\n    console.error(error);\n  }\n}\n\nasync function fetchFeedbacks(limit) {\n  const params = new URLSearchParams({ limit: String(limit), page: '1' });\n  const response = await fetch(`${API_URL}?${params.toString()}`);\n\n  if (!response.ok) {\n    throw new Error(`Feedbacks request failed: ${response.status}`);\n  }\n\n  const payload = await response.json();\n  const items = payload?.data ?? payload?.feedbacks ?? payload ?? [];\n  return Array.isArray(items) ? items.slice(0, limit) : [];\n}\n\nfunction renderSlides(items) {\n  if (!items.length) {\n    renderError('No feedbacks available.');\n    return;\n  }\n\n  refs.slidesEl.innerHTML = items.map(buildSlideMarkup).join('');\n  setPaginationState(0, items.length);\n}\n\nfunction buildSlideMarkup(item) {\n  const name = item?.name ?? 'Anonymous';\n  const text = item?.descr ?? '';\n  const rating = clampRating(Math.round(Number(item?.rating ?? 0)));\n\n  return `\n    <div class=\"swiper-slide feedback-card\">\n      <div class=\"feedback-rating rating star-icon value-${rating} label-hidden\">\n        <div class=\"label-value\">${rating}</div>\n        <div class=\"star-container\">\n          ${buildStars()}\n        </div>\n      </div>\n      <p class=\"feedback-text\">\"${escapeHtml(text)}\"</p>\n      <p class=\"feedback-author\">${escapeHtml(name)}</p>\n    </div>\n  `;\n}\n\nfunction buildStars() {\n  return Array.from({ length: 5 })\n    .map(\n      () => `\n        <div class=\"star icon\">\n          <i class=\"star-empty\"></i>\n          <i class=\"star-half\"></i>\n          <i class=\"star-filled\"></i>\n        </div>\n      `\n    )\n    .join('');\n}\n\nfunction initSwiper() {\n  if (!refs.swiperEl) return;\n\n  const swiper = new Swiper(refs.swiperEl, {\n    modules: [Navigation],\n    slidesPerView: 1,\n    spaceBetween: 24,\n    navigation: {\n      prevEl: refs.prevBtn,\n      nextEl: refs.nextBtn,\n    },\n    on: {\n      slideChange(swiperInstance) {\n        setPaginationState(swiperInstance.activeIndex, swiperInstance.slides.length);\n      },\n    },\n  });\n\n  setPaginationState(swiper.activeIndex, swiper.slides.length);\n}\n\nfunction setPaginationState(activeIndex, total) {\n  if (!refs.dots.length) return;\n\n  refs.dots.forEach(dot => dot.classList.remove('is-active'));\n\n  if (total <= 1) {\n    refs.dots[0]?.classList.add('is-active');\n    return;\n  }\n\n  if (activeIndex <= 0) {\n    refs.dots[0]?.classList.add('is-active');\n    return;\n  }\n\n  if (activeIndex >= total - 1) {\n    refs.dots[2]?.classList.add('is-active');\n    return;\n  }\n\n  refs.dots[1]?.classList.add('is-active');\n}\n\nfunction renderError(message) {\n  refs.slidesEl.innerHTML = `\n    <div class=\"swiper-slide feedback-card\">\n      <p class=\"feedback-text\">${escapeHtml(message)}</p>\n    </div>\n  `;\n}\n\nfunction clampRating(value) {\n  if (!Number.isFinite(value)) return 0;\n  return Math.min(5, Math.max(0, value));\n}\n\nfunction escapeHtml(value) {\n  return String(value)\n    .replaceAll('&', '&amp;')\n    .replaceAll('<', '&lt;')\n    .replaceAll('>', '&gt;')\n    .replaceAll('\"', '&quot;')\n    .replaceAll(\"'\", '&#39;');\n}\n"],"names":["API_URL","FEEDBACK_LIMIT","refs","initFeedback","feedbacks","fetchFeedbacks","renderSlides","initSwiper","error","renderError","limit","params","response","payload","items","buildSlideMarkup","setPaginationState","item","name","text","rating","clampRating","buildStars","escapeHtml","swiper","Swiper","Navigation","swiperInstance","activeIndex","total","dot","_a","_b","_c","_d","message","value"],"mappings":"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"}